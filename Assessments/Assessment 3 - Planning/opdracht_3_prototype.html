<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maas College ICT Support</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'maas-blue': '#0066CC',
                        'maas-dark': '#003366',
                        'maas-light': '#4D94D9',
                        'maas-accent': '#FF6B35',
                    },
                    fontFamily: {
                        'display': ['Outfit', 'sans-serif'],
                        'body': ['DM Sans', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        * {
            font-family: 'DM Sans', sans-serif;
        }
        
        .ticket-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .ticket-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px -10px rgba(0, 102, 204, 0.2);
        }
        
        .tab-active {
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .gradient-border {
            position: relative;
            background: white;
            border-radius: 1rem;
        }
        
        .gradient-border::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 1rem;
            padding: 2px;
            background: linear-gradient(135deg, #0066CC, #4D94D9);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
        }
        
        .loading-dots span {
            animation: pulse 1.4s ease-in-out infinite;
        }
        
        .loading-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .loading-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <img src="https://www.maascollege.nl/wp-content/uploads/2022/09/Logo.svg" alt="Maas College" class="h-12">
                    <div class="h-8 w-px bg-slate-300"></div>
                    <h1 class="font-display font-semibold text-2xl text-maas-dark">ICT Support</h1>
                </div>
                <div class="text-sm text-slate-600 font-medium">
                    Prototype v1.0
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-6 py-12">
        <!-- Tab Navigation -->
        <div class="mb-8">
            <div class="bg-white rounded-2xl shadow-lg p-2 inline-flex gap-2">
                <button onclick="switchTab('user')" id="userTab" class="tab-btn px-8 py-3 rounded-xl font-medium transition-all duration-300 bg-maas-blue text-white">
                    üë§ Ticket Aanmaken
                </button>
                <button onclick="switchTab('manager')" id="managerTab" class="tab-btn px-8 py-3 rounded-xl font-medium transition-all duration-300 text-slate-600 hover:bg-slate-100">
                    üë®‚Äçüíº Beheer Dashboard
                </button>
            </div>
        </div>

        <!-- User View -->
        <div id="userView" class="tab-content tab-active">
            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Form Section -->
                <div class="gradient-border p-8">
                    <div class="mb-6">
                        <h2 class="font-display font-semibold text-3xl text-maas-dark mb-2">Nieuw Support Ticket</h2>
                        <p class="text-slate-600">Vul onderstaand formulier in en ons ICT team helpt u zo snel mogelijk.</p>
                    </div>

                    <form id="ticketForm" class="space-y-6">
                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-2">Naam</label>
                            <input type="text" id="userName" required class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-maas-blue focus:outline-none transition-colors" placeholder="Uw volledige naam">
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-2">E-mailadres</label>
                            <input type="email" id="userEmail" required class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-maas-blue focus:outline-none transition-colors" placeholder="naam@maascollege.nl">
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-2">Probleembeschrijving</label>
                            <textarea id="description" required rows="4" class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-maas-blue focus:outline-none transition-colors resize-none" placeholder="Beschrijf uw probleem zo gedetailleerd mogelijk..."></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-slate-700 mb-2">Gewenste Oplossing</label>
                            <textarea id="solution" rows="3" class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-maas-blue focus:outline-none transition-colors resize-none" placeholder="Wat zou u graag zien als oplossing?"></textarea>
                        </div>

                        <button type="submit" class="w-full bg-maas-blue hover:bg-maas-dark text-white font-semibold py-4 rounded-xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg hover:shadow-xl">
                            üé´ Ticket Versturen
                        </button>
                    </form>
                </div>

                <!-- Info Section -->
                <div class="space-y-6">
                    <div class="bg-white rounded-2xl p-8 shadow-lg">
                        <div class="flex items-start gap-4 mb-6">
                            <div class="p-3 bg-blue-100 rounded-xl">
                                <svg class="w-6 h-6 text-maas-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-display font-semibold text-xl text-maas-dark mb-2">Hoe werkt het?</h3>
                                <ul class="space-y-2 text-slate-600">
                                    <li class="flex items-start gap-2">
                                        <span class="text-maas-blue font-bold">1.</span>
                                        <span>Vul het formulier in met uw gegevens en probleembeschrijving</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-maas-blue font-bold">2.</span>
                                        <span>Ons ICT team ontvangt uw ticket automatisch</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-maas-blue font-bold">3.</span>
                                        <span>U ontvangt binnen 24 uur een reactie per e-mail</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-maas-blue to-maas-dark rounded-2xl p-8 text-white shadow-xl">
                        <h3 class="font-display font-semibold text-xl mb-4">Veelvoorkomende Problemen</h3>
                        <div class="space-y-3">
                            <div class="bg-white/10 backdrop-blur-sm rounded-lg p-3">
                                <div class="font-medium">üíª Laptop start niet op</div>
                            </div>
                            <div class="bg-white/10 backdrop-blur-sm rounded-lg p-3">
                                <div class="font-medium">üåê Geen internetverbinding</div>
                            </div>
                            <div class="bg-white/10 backdrop-blur-sm rounded-lg p-3">
                                <div class="font-medium">üîê Wachtwoord vergeten</div>
                            </div>
                            <div class="bg-white/10 backdrop-blur-sm rounded-lg p-3">
                                <div class="font-medium">üìß E-mail problemen</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Manager View -->
        <div id="managerView" class="tab-content hidden">
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <div class="mb-8">
                    <h2 class="font-display font-semibold text-3xl text-maas-dark mb-2">Support Tickets Dashboard</h2>
                    <p class="text-slate-600">Beheer en beantwoord openstaande tickets met AI-ondersteuning</p>
                </div>

                <div id="ticketsList" class="space-y-4">
                    <!-- Tickets will be dynamically added here -->
                </div>

                <div id="emptyState" class="text-center py-16">
                    <div class="inline-flex items-center justify-center w-20 h-20 bg-slate-100 rounded-full mb-4">
                        <svg class="w-10 h-10 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                        </svg>
                    </div>
                    <h3 class="font-display font-semibold text-xl text-slate-700 mb-2">Geen Openstaande Tickets</h3>
                    <p class="text-slate-500">Maak een ticket aan via het formulier om deze hier te zien verschijnen.</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl transform scale-95 opacity-0 transition-all duration-300" id="modalContent">
            <div class="text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4">
                    <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                </div>
                <h3 class="font-display font-semibold text-2xl text-slate-900 mb-2">Ticket Verstuurd!</h3>
                <p class="text-slate-600 mb-6">Uw ticket is succesvol aangemaakt. U ontvangt binnen 24 uur een reactie op uw e-mailadres.</p>
                <button onclick="closeModal()" class="bg-maas-blue hover:bg-maas-dark text-white font-semibold px-8 py-3 rounded-xl transition-colors">
                    Sluiten
                </button>
            </div>
        </div>
    </div>

    <script>
        let tickets = [];
        
        function switchTab(tab) {
            const userView = document.getElementById('userView');
            const managerView = document.getElementById('managerView');
            const userTab = document.getElementById('userTab');
            const managerTab = document.getElementById('managerTab');
            
            if (tab === 'user') {
                userView.classList.remove('hidden');
                managerView.classList.add('hidden');
                userTab.classList.add('bg-maas-blue', 'text-white');
                userTab.classList.remove('text-slate-600', 'hover:bg-slate-100');
                managerTab.classList.remove('bg-maas-blue', 'text-white');
                managerTab.classList.add('text-slate-600', 'hover:bg-slate-100');
                userView.classList.add('tab-active');
            } else {
                managerView.classList.remove('hidden');
                userView.classList.add('hidden');
                managerTab.classList.add('bg-maas-blue', 'text-white');
                managerTab.classList.remove('text-slate-600', 'hover:bg-slate-100');
                userTab.classList.remove('bg-maas-blue', 'text-white');
                userTab.classList.add('text-slate-600', 'hover:bg-slate-100');
                managerView.classList.add('tab-active');
                renderTickets();
            }
        }
        
        document.getElementById('ticketForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const ticket = {
                id: Date.now(),
                name: document.getElementById('userName').value,
                email: document.getElementById('userEmail').value,
                description: document.getElementById('description').value,
                solution: document.getElementById('solution').value,
                timestamp: new Date().toLocaleString('nl-NL'),
                status: 'open'
            };
            
            tickets.push(ticket);
            
            // Reset form
            this.reset();
            
            // Show success modal
            showModal();
        });
        
        function showModal() {
            const modal = document.getElementById('successModal');
            const content = document.getElementById('modalContent');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => {
                content.style.transform = 'scale(1)';
                content.style.opacity = '1';
            }, 10);
        }
        
        function closeModal() {
            const modal = document.getElementById('successModal');
            const content = document.getElementById('modalContent');
            content.style.transform = 'scale(0.95)';
            content.style.opacity = '0';
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }, 300);
        }
        
        function renderTickets() {
            const ticketsList = document.getElementById('ticketsList');
            const emptyState = document.getElementById('emptyState');
            
            if (tickets.length === 0) {
                ticketsList.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            ticketsList.innerHTML = tickets.map(ticket => `
                <div class="ticket-card border-2 border-slate-200 rounded-2xl p-6 hover:border-maas-light">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <div class="flex items-center gap-3 mb-2">
                                <h3 class="font-display font-semibold text-xl text-slate-900">${ticket.name}</h3>
                                <span class="px-3 py-1 bg-blue-100 text-maas-blue text-xs font-semibold rounded-full">Open</span>
                            </div>
                            <p class="text-sm text-slate-500">${ticket.email} ‚Ä¢ ${ticket.timestamp}</p>
                        </div>
                        <div class="text-2xl">üé´</div>
                    </div>
                    
                    <div class="space-y-3 mb-4">
                        <div>
                            <div class="text-xs font-semibold text-slate-600 uppercase tracking-wide mb-1">Probleem</div>
                            <p class="text-slate-700">${ticket.description}</p>
                        </div>
                        ${ticket.solution ? `
                        <div>
                            <div class="text-xs font-semibold text-slate-600 uppercase tracking-wide mb-1">Gewenste Oplossing</div>
                            <p class="text-slate-700">${ticket.solution}</p>
                        </div>
                        ` : ''}
                    </div>
                    
                    <div id="response-${ticket.id}" class="hidden mb-4 p-4 bg-green-50 border-2 border-green-200 rounded-xl">
                        <div class="text-xs font-semibold text-green-700 uppercase tracking-wide mb-2">Gegenereerde Reactie</div>
                        <div id="response-text-${ticket.id}" class="text-slate-700 whitespace-pre-wrap"></div>
                    </div>
                    
                    <button onclick="generateResponse(${ticket.id})" id="btn-${ticket.id}" class="w-full bg-gradient-to-r from-maas-blue to-maas-light hover:from-maas-dark hover:to-maas-blue text-white font-semibold py-3 rounded-xl transition-all duration-300 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                        <span>AI Reactie Genereren</span>
                    </button>
                </div>
            `).join('');
        }
        
        async function generateResponse(ticketId) {
            const ticket = tickets.find(t => t.id === ticketId);
            const button = document.getElementById(`btn-${ticketId}`);
            const responseDiv = document.getElementById(`response-${ticketId}`);
            const responseText = document.getElementById(`response-text-${ticketId}`);
            
            // Update button to loading state
            button.disabled = true;
            button.innerHTML = `
                <div class="loading-dots flex gap-1">
                    <span class="w-2 h-2 bg-white rounded-full"></span>
                    <span class="w-2 h-2 bg-white rounded-full"></span>
                    <span class="w-2 h-2 bg-white rounded-full"></span>
                </div>
                <span>Reactie wordt gegenereerd...</span>
            `;
            
            try {
                const response = await fetch("https://api.anthropic.com/v1/messages", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        model: "claude-sonnet-4-20250514",
                        max_tokens: 1000,
                        messages: [{
                            role: "user",
                            content: `Je bent een vriendelijke en professionele ICT support medewerker van Maas College. Schrijf een reactie op het volgende support ticket in het Nederlands:

Naam: ${ticket.name}
Email: ${ticket.email}
Probleem: ${ticket.description}
Gewenste oplossing: ${ticket.solution || 'Niet gespecificeerd'}

Schrijf een vriendelijke, professionele reactie die:
1. De gebruiker bedankt voor het ticket
2. Het probleem erkent
3. Een oplossing of vervolgstappen voorstelt
4. Aangeeft wat de verwachte doorlooptijd is
5. Eindigt met een vriendelijke afsluiting

Houd de reactie beknopt maar compleet (ongeveer 3-4 alinea's). Begin direct met de reactie zonder extra uitleg of headers.`
                        }]
                    })
                });
                
                const data = await response.json();
                const generatedText = data.content[0].text;
                
                // Show the response
                responseText.textContent = generatedText;
                responseDiv.classList.remove('hidden');
                
                // Update button
                button.innerHTML = `
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span>Reactie Gegenereerd</span>
                `;
                button.classList.remove('from-maas-blue', 'to-maas-light', 'hover:from-maas-dark', 'hover:to-maas-blue');
                button.classList.add('bg-green-600', 'hover:bg-green-700');
                
            } catch (error) {
                console.error('Error generating response:', error);
                button.innerHTML = `
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                    <span>Fout bij genereren - probeer opnieuw</span>
                `;
                button.disabled = false;
                button.classList.remove('from-maas-blue', 'to-maas-light');
                button.classList.add('bg-red-600', 'hover:bg-red-700');
            }
        }
    </script>
</body>
</html>
